<div  style="margin-top: 20px; margin-left: 45px">

 <mp-workspace-layout horizontal-collapsed-size=0>
          <mp-workspace-row>
            <mp-workspace-item id='1' default-size=550>
                <div class='grid-demo' style='flex: 1;  width:500px'>
               
                    <h2>CSO Topics</h2>
                  <div style="padding: 20px; margin: 20px;height:500px; background-color: #f7f7f7; border: 1px solid #e8e8e8;">
                  <semantic-lazy-tree
                                roots-query='PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                                            SELECT DISTINCT ?item ?hasChildren WHERE {
                                              ?item a cso:Topic .
                                              FILTER NOT EXISTS { ?supertopic cso:superTopicOf ?item }
                                              OPTIONAL { ?item cso:superTopicOf ?subtopic }
                                              BIND (IF(BOUND(?subtopic), "true", "false") AS ?hasChildren) 
                                            }'

                                children-query='PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                                            SELECT DISTINCT ?item ?hasChildren WHERE {
                                              ?item a cso:Topic .
                                              ?parent cso:superTopicOf ?item .
                                              OPTIONAL { ?item cso:superTopicOf ?subtopic }
                                              BIND (IF(BOUND(?subtopic), "true", "false") AS ?hasChildren) 
                                            }'
                                node-template='{{> node}}'

                                search-query='PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                                              SELECT DISTINCT ?item ?label ?score ?hasChildren WHERE {
                                                ?item a cso:Topic .
                                                BIND ( STRAFTER (STR(?item), "http://cso.kmi.open.ac.uk/schema/cso#") AS ?label)
                                                BIND("false" AS ?hasChildren)
                                                FILTER REGEX(LCASE(STRAFTER (STR(?item), "http://cso.kmi.open.ac.uk/schema/cso#") ), LCASE(?__token__), "i")
                                              } ORDER BY DESC (?score) (?label) LIMIT 50
                                            '
                                placeholder='Select or search for a topic..'
                                parents-query='PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                                              SELECT ?item ?parent ?hasChildren WHERE {
                                                ?parent cso:superTopicOf ?item .
                                                OPTIONAL { ?item cso:superTopicOf ?subtopic }
                                                BIND (IF(BOUND(?subtopic), "true", "false") AS ?hasChildren)
                                               }'
                              >
                         <template id='node'>
                          
                              <mp-event-trigger type="Component.TemplateUpdate" targets='["event-target"]' data='{"item": "<{{iri}}>"}'>
                              <span>
                                {{label}} 
                              </span>
                              </mp-event-trigger>
                            
                          </template>
                        
                        
                        
                    </semantic-lazy-tree>
                    </div>
                </div>
              </mp-workspace-item>
            <mp-workspace-item id='2'>
              <div class='grid-demo' style='flex: 1; padding: 20px'>
               <mp-event-target-template-render id="event-target" template="{{> template}}">
                <template id="template">
                
               
                  <h2>Graph View</h2>
                  <div style="height:500px">
                     {{#if item}}
                   <div class='ontodia-container'  >
                      <div class='ontodia-workspace-container' style="height:500px" >
                        <ontodia query="PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                                        CONSTRUCT {	 
                                          ?parent cso:superTopicOf ?this .
                                          ?this cso:superTopicOf ?child .
                                        } 
                                        WHERE {
                                          BIND ({{item}} as ?this)
                                          {
                                            {
                                              ?parent cso:superTopicOf ?this .
                                            }
                                            UNION 
                                            {
                                              ?this cso:superTopicOf ?child .
                                            }
                                          }
                                        }"  >
                         </ontodia>
                      </div>
                      <div class='ontodia-knowledge-panel-container'>
                        <mp-event-proxy
                                        id='proxy-selection'
                                        on-event-type='Ontodia.ShowElementInfo'
                                        proxy-event-type='KnowledgePanel.Open'
                                        proxy-targets='[]'>
                        </mp-event-proxy>
                        <semantic-context repository='default'>
                          <mp-knowledge-panel-frame no-pin=true></mp-knowledge-panel-frame>
                        </semantic-context>
                      </div>
                    </div>
                  {{/if}}
                  </div>
                  <h2>Broader/Narrower topics</h2>
                  <div style="height:500px">
                     {{#if item}}
                  <semantic-tree
                      query="PREFIX cso: <http://cso.kmi.open.ac.uk/schema/cso#>
                            SELECT ?node ?parent 
                            WHERE {
                              {
                                BIND ({{item}} as ?parent)
                                ?parent cso:superTopicOf ?node
                              } 
                              UNION 
                              {
                                BIND ({{item}} as ?node) 
                                ?parent cso:superTopicOf ?node
                              }
                            }"
                      provider='d3-sankey'  
                      d3-tree-options='{"nodeWidth":300, "nodeHeight":100, "nodeLeftMargin": 5}'>
                  </semantic-tree>
                     {{/if}}
                  </div>

               
                 </mp-event-target-template-render>
                </template>
              </div>
            </mp-workspace-item>
           
          </mp-workspace-row>
        </mp-workspace-layout>

</div>